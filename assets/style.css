:root{
  --bg:#ffffff; --card:#ffffff; --muted:#586070; --text:#0b1220; --accent:#2563eb; --border:#e5e7eb;
  --ok:#10b981; --warn:#f59e0b; --line:#111827;
  --br:16px; --shadow:0 1px 2px rgba(0,0,0,.06), 0 4px 12px rgba(0,0,0,.06);
}
*{box-sizing:border-box}
html,body{height:100%}
body{margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif; background:var(--bg); color:var(--text)}

/* Mobile-first responsive wrapper */
.wrap{
  max-width:1100px; 
  margin:0 auto; 
  padding:12px;
}
@media(min-width:768px){ 
  .wrap{padding:16px} 
}

/* Mobile-friendly header */
header{
  display:flex; 
  flex-direction:column;
  gap:12px; 
  align-items:stretch; 
  padding:8px 0 16px;
}
@media(min-width:768px){ 
  header{
    flex-direction:row;
    align-items:center; 
    justify-content:space-between;
  } 
}

/* Mobile-friendly typography */
h1{
  font-size:20px; 
  margin:0; 
  font-weight:700; 
  line-height:1.3;
  text-align:center;
}
@media(min-width:480px){ 
  h1{font-size:22px; text-align:left;} 
}

.h2{
  font-size:16px; 
  margin:0 0 6px 0;
}

.header-description{
  font-size:14px !important;
  line-height:1.4;
  text-align:center;
}
@media(min-width:768px){ 
  .header-description{text-align:left;} 
}

/* Responsive layout */
.row{
  display:grid; 
  grid-template-columns:1fr; 
  gap:16px;
}
@media(min-width:960px){ 
  .row{grid-template-columns: 440px 1fr; align-items:start} 
}

.card{
  background:var(--card); 
  border:1px solid var(--border); 
  border-radius:var(--br); 
  padding:12px; 
  box-shadow:var(--shadow); 
  overflow:visible;
}
@media(min-width:768px){ 
  .card{padding:14px} 
}

.section{
  border-top:1px solid var(--border); 
  margin-top:10px; 
  padding-top:10px;
}
.section:first-child{
  border-top:none; 
  padding-top:0;
}

/* Mobile-first grid system */
.grid{
  display:grid; 
  grid-template-columns:1fr; 
  gap:10px;
}
@media(min-width:480px){ 
  .grid.two{grid-template-columns:1fr 1fr} 
}
@media(min-width:540px){ 
  .grid.three{grid-template-columns:1fr 1fr 1fr}
}

/* Mobile-friendly form elements */
.label{
  font-size:12px; 
  color:var(--muted); 
  margin-bottom:6px; 
  font-weight:500;
}
.small{
  font-size:12px; 
  color:var(--muted); 
  line-height:1.4;
}

input,select{
  width:100%; 
  padding:12px; 
  background:#fff; 
  border:1px solid var(--border); 
  border-radius:10px; 
  color:var(--text);
  font-size:16px; /* Prevents zoom on iOS */
  -webkit-appearance:none;
}
@media(min-width:768px){ 
  input,select{padding:10px 12px; font-size:14px;} 
}
input:focus,select:focus{
  outline:2px solid rgba(37,99,235,.25); 
  border-color:#bfdbfe;
}

/* Mobile-friendly inline elements */
.inline{
  display:flex; 
  gap:8px; 
  align-items:center; 
  flex-wrap:wrap;
}
@media(min-width:768px){ 
  .inline{gap:10px;} 
}

/* Mobile-optimized toggle buttons */
.toggle{
  display:flex; 
  background:#f8fafc; 
  border:1px solid var(--border); 
  border-radius:10px; 
  overflow:hidden; 
  width:100%;
  min-width:200px;
  min-height:48px;
}
@media(min-width:480px){ 
  .toggle{width:auto;} 
}

.toggle button{
  padding:12px 8px; 
  border:0; 
  background:transparent; 
  color:var(--muted); 
  cursor:pointer;
  flex:1;
  font-size:14px;
  text-align:center;
  min-height:48px;
  display:flex;
  align-items:center;
  justify-content:center;
}
@media(min-width:480px){ 
  .toggle button{padding:8px 12px; flex:none; font-size:14px;} 
}
.toggle button.active{
  background:#e5edff; 
  color:#1e3a8a;
}

/* Mobile-friendly buttons */
.btn{
  background:#1f2937; 
  color:#fff; 
  border:1px solid #111827; 
  padding:12px 16px; 
  border-radius:10px; 
  cursor:pointer; 
  text-decoration:none; 
  box-shadow:var(--shadow);
  font-size:14px;
  width:100%;
  margin:4px 0;
  text-align:center;
  min-height:48px;
  display:inline-flex;
  align-items:center;
  justify-content:center;
}
@media(min-width:480px){ 
  .btn{width:auto; display:inline-block; margin:0 4px 0 0; padding:8px 12px;} 
}
.btn:hover{
  filter:brightness(1.05);
}

/* Mobile-friendly statistics */
.stat .hero{
  font-size:22px; 
  font-weight:800;
  line-height:1.2;
}
@media(min-width:480px){ 
  .stat .hero{font-size:26px;} 
}

/* Mobile-optimized lists */
.list{
  display:grid; 
  grid-template-columns:1fr; 
  gap:8px; 
  margin-top:10px;
}
.item{
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
  padding:10px 12px; 
  background:#ffffff; 
  border:1px solid var(--border); 
  border-radius:12px;
  font-size:14px;
}

/* Mobile autocomplete */
.autocomplete{
  position:relative;
}
.ac-list{
  position:absolute; 
  top:100%; 
  left:0; 
  right:0; 
  z-index:99999; 
  background:#fff; 
  border:1px solid var(--border); 
  border-radius:10px; 
  box-shadow:var(--shadow); 
  max-height:200px; 
  overflow:auto; 
  margin-top:6px;
}
@media(min-width:768px){ 
  .ac-list{max-height:220px;} 
}
.ac-item{
  padding:10px; 
  cursor:pointer;
  font-size:14px;
}
@media(min-width:768px){ 
  .ac-item{padding:8px 10px;} 
}
.ac-item:hover, .ac-item.active{
  background:#f3f4f6;
}

/* Mobile-friendly chart and legend */
.legend{
  display:flex; 
  gap:8px; 
  align-items:center; 
  font-size:11px; 
  color:var(--muted); 
  margin-top:6px;
  flex-wrap:wrap;
  justify-content:center;
}
@media(min-width:480px){ 
  .legend{font-size:12px; gap:12px; justify-content:flex-start;} 
}
.swatch{
  display:inline-block; 
  width:14px; 
  height:6px; 
  border-radius:8px; 
  margin-right:4px;
}
.swatch.balance{background:#2563eb}
.swatch.principal{background:#10b981}
.swatch.interest{background:#f59e0b}

/* Mobile-friendly canvas */
#chart{
  width:100% !important;
  height:auto !important;
  max-width:100%;
}

/* SEO content mobile optimization */
.seo-content{
  font-size:14px !important;
}
.seo-content h2{
  font-size:22px !important;
  text-align:center;
}
@media(min-width:768px){ 
  .seo-content h2{font-size:28px !important;} 
}
.seo-content h3{
  font-size:18px !important;
}
@media(min-width:768px){ 
  .seo-content h3{font-size:20px !important;} 
}
.seo-content h4{
  font-size:16px !important;
}
.seo-content div[style*="grid-template-columns"]{
  display:block !important;
}
@media(min-width:768px){ 
  .seo-content div[style*="grid-template-columns"]{
    display:grid !important;
  } 
}
.seo-content div[style*="grid-template-columns"] > div{
  margin-bottom:16px;
}

/* Footer */
.footer{
  color:var(--muted); 
  font-size:12px; 
  margin-top:16px; 
  text-align:center;
  padding:16px 0;
}

/* Touch-friendly improvements */
@media (hover: none) and (pointer: coarse) {
  .btn, .toggle button, input, select {
    min-height: 44px; /* Apple's recommended touch target size */
  }
  .toggle button {
    padding: 12px 8px;
  }
}

/* Hamburger Menu Styles */
.hamburger-menu {
  position: relative;
  display: inline-block;
  z-index: 1001;
}

.hamburger-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 8px;
  border-radius: 8px;
  transition: background-color 0.2s ease;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  width: 44px;
  height: 44px;
  -webkit-tap-highlight-color: rgba(0,0,0,0);
  touch-action: manipulation;
  user-select: none;
  -webkit-user-select: none;
}

.hamburger-button:hover {
  background-color: #f8f9fa;
}

.hamburger-button:active {
  background-color: #e9ecef;
}

.hamburger-button span {
  display: block;
  width: 20px;
  height: 2px;
  background-color: var(--text, #0b1220);
  margin: 2px 0;
  border-radius: 2px;
  transition: all 0.3s ease;
  transform-origin: center;
}

.hamburger-button.active span:nth-child(1) {
  transform: rotate(45deg) translate(5px, 5px);
}

.hamburger-button.active span:nth-child(2) {
  opacity: 0;
}

.hamburger-button.active span:nth-child(3) {
  transform: rotate(-45deg) translate(7px, -6px);
}

.dropdown-menu {
  position: absolute;
  top: calc(100% + 8px);
  left: 0;
  background: white;
  border: 1px solid var(--border, #e5e7eb);
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  min-width: 280px;
  max-width: 90vw;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-10px);
  transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
  -webkit-overflow-scrolling: touch;
  overflow: hidden;
}

.dropdown-menu.show {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

.dropdown-item {
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  color: var(--text);
  text-decoration: none;
  font-size: 14px;
  font-weight: 500;
  border-radius: 8px;
  margin: 4px;
  transition: background-color 0.2s ease;
}

.dropdown-item:hover {
  background-color: #f8f9fa;
  color: var(--text);
}

.dropdown-item.active {
  background-color: var(--accent);
  color: white;
}

.dropdown-item:first-child {
  margin-top: 8px;
}

.dropdown-item:last-child {
  margin-bottom: 8px;
}

/* Header adjustments for hamburger menu */
.header-with-menu {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 8px 0 16px;
}

.header-content {
  flex: 1;
}

/* Mobile responsiveness */
@media (max-width: 768px) {
  .dropdown-menu {
    min-width: 260px;
    right: 0;
    left: auto;
    max-width: calc(100vw - 24px);
    transform: translateX(0) translateY(-10px);
  }

  .dropdown-menu.show {
    transform: translateX(0) translateY(0);
  }

  .dropdown-item {
    padding: 16px 18px;
    font-size: 16px;
    min-height: 44px;
    display: flex;
    align-items: center;
  }

  .hamburger-button {
    width: 44px;
    height: 44px;
    padding: 10px;
  }

  .hamburger-button span {
    width: 18px;
    height: 2px;
  }
}

/* iOS Safari specific fixes */
@supports (-webkit-touch-callout: none) {
  .hamburger-menu {
    position: relative;
    display: block;
  }
  
  .hamburger-button {
    -webkit-appearance: none;
    appearance: none;
  }
  
  .dropdown-menu {
    -webkit-transform: translateY(-10px);
    -webkit-transition: opacity 0.3s ease, visibility 0.3s ease, -webkit-transform 0.3s ease;
  }
  
  .dropdown-menu.show {
    -webkit-transform: translateY(0);
  }
}