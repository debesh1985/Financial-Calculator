<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mortgage Calculator — Canada & USA</title>
  <meta name="description" content="Mortgage calculator for Canada and the USA with city suggestions, flexible payment frequencies, insurance (CMHC/FHA/PMI), and a yearly amortization graph." />
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Mortgage Calculator — Canada & USA</h1>
      <div class="toggle" id="countryToggle" aria-label="Country">
        <button type="button" data-country="canada" class="active">Canada (CAD)</button>
        <button type="button" data-country="usa">USA (USD)</button>
      </div>
    </header>

    <div class="row">
      <section class="card" aria-labelledby="inputsTitle">
        <h2 id="inputsTitle" class="h2">Inputs</h2>

        <div class="section">
          <div class="inline">
            <span class="label">Scenario</span>
            <div class="toggle" id="flowToggle">
              <button type="button" data-flow="purchase" class="active">Purchase</button>
              <button type="button" data-flow="refi">Refinance</button>
            </div>
          </div>
        </div>

        <div class="section">
          <div class="grid two">
            <div class="autocomplete">
              <div class="label">City & Province/State (type to search)</div>
              <input id="region" placeholder="e.g., Toronto, ON or San Francisco, CA" autocomplete="off" />
              <div id="region-list" class="ac-list" style="display:none"></div>
              <div class="small">Start typing (try “Tor”, “San”, “Van”, “Mon”).</div>
            </div>
            <div>
              <div class="label">Term (years)</div>
              <select id="term">
                <option>30</option>
                <option>25</option>
                <option selected>20</option>
                <option>15</option>
                <option>10</option>
              </select>
            </div>
          </div>

          <div class="grid two">
            <div>
              <div class="label">Home price / appraised value</div>
              <input id="price" type="number" min="0" step="0.01" value="700000" />
            </div>
            <div id="downWrap">
              <div class="label">Down payment (%)</div>
              <input id="downPct" type="number" min="0" max="100" step="0.01" value="10" />
            </div>
          </div>

          <div class="grid two" id="refiWrap" style="display:none">
            <div>
              <div class="label">Current loan balance</div>
              <input id="currBalance" type="number" min="0" step="0.01" value="400000" />
            </div>
            <div>
              <div class="label">Cash‑out amount (optional)</div>
              <input id="cashOut" type="number" min="0" step="0.01" value="0" />
            </div>
          </div>

          <div class="grid two">
            <div>
              <div class="label">Interest rate (annual %)</div>
              <input id="rate" type="number" min="0" step="0.01" value="5.29" />
            </div>
            <div>
              <div class="label">Payment frequency</div>
              <select id="frequency">
                <option value="monthly" selected>Monthly (12/yr)</option>
                <option value="semi-monthly">Semi‑Monthly (24/yr)</option>
                <option value="biweekly">Bi‑Weekly (26/yr)</option>
                <option value="accelerated-biweekly">Accelerated Bi‑Weekly (26/yr)</option>
                <option value="weekly">Weekly (52/yr)</option>
                <option value="accelerated-weekly">Accelerated Weekly (52/yr)</option>
              </select>
            </div>
          </div>
        </div>

        <div class="section" id="insuranceSection">
          <div class="inline" style="justify-content:space-between">
            <div>
              <div class="label">Mortgage insurance</div>
              <div class="small" id="insuranceHelp">Applied automatically if LTV > 80%.</div>
            </div>
            <div class="toggle" id="usInsToggle" style="display:none">
              <button type="button" data-ins="fha" class="active">FHA</button>
              <button type="button" data-ins="pmi">Conventional PMI</button>
            </div>
          </div>

          <div class="grid two" id="canadaToggles" style="margin-top:8px; display:none">
            <div class="inline">
              <input id="financePremium" type="checkbox" checked />
              <label for="financePremium" class="small">Finance CMHC premium into mortgage</label>
            </div>
            <div class="small">Note: CMHC generally applies to purchases, not refinances.</div>
          </div>
        </div>

        <div class="section">
          <div class="grid two">
            <div>
              <div class="label">Property tax (monthly)</div>
              <input id="taxMonthly" type="number" min="0" step="1" value="400" />
            </div>
            <div>
              <div class="label">Condo fee (monthly)</div>
              <input id="condo" type="number" min="0" step="1" value="300" />
            </div>
          </div>
          <div class="grid three">
            <div>
              <div class="label">Water (monthly)</div>
              <input id="water" type="number" min="0" step="1" value="40" />
            </div>
            <div>
              <div class="label">Electricity (monthly)</div>
              <input id="electricity" type="number" min="0" step="1" value="120" />
            </div>
            <div>
              <div class="label">Heating (monthly)</div>
              <input id="heating" type="number" min="0" step="1" value="100" />
            </div>
          </div>
          <div class="grid two">
            <div>
              <div class="label">Home insurance (monthly, optional)</div>
              <input id="homeIns" type="number" min="0" step="1" value="0" />
            </div>
          </div>
        </div>

        <div class="section">
          <button class="btn" id="prefillCanada">Prefill Canada</button>
          <button class="btn" id="prefillUSA">Prefill USA</button>
        </div>
      </section>

      <section class="card" aria-labelledby="resultsTitle">
        <h2 id="resultsTitle" class="h2">Results</h2>

        <div class="grid two">
          <div class="stat">
            <div class="label">Per‑period mortgage payment (P&I)</div>
            <div class="hero" id="perPeriod">—</div>
            <div class="small" id="perPeriodNote">Based on chosen schedule</div>
          </div>
          <div class="stat">
            <div class="label">Monthly equivalent (P&I)</div>
            <div class="hero" id="monthlyOut">—</div>
            <div class="small">Converted for easy comparison</div>
          </div>
        </div>

        <div class="section">
          <div class="label">Estimated Monthly Cost of Ownership</div>
          <div class="hero" id="ownershipTotal">—</div>
          <div class="list" id="breakdown"></div>
        </div>

        <div class="section">
          <div class="label">Amortization by year</div>
          <canvas id="chart" width="900" height="260" aria-label="Yearly amortization graph"></canvas>
          <div class="legend">
            <span class="swatch balance"></span>Balance
            <span class="swatch principal"></span>Principal
            <span class="swatch interest"></span>Interest
          </div>
          <div class="small">X‑axis shows years 1..Term. Bars show yearly principal/interest; blue line shows remaining balance.</div>
        </div>
      </section>
    </div>

    <footer class="footer">
      © FunDu Web Co. No data collected. Update config inside JS for newer rules.
    </footer>
  </div>

  <script src="assets/places.js"></script>
  <script src="assets/app.js"></script>
</body>
</html>
